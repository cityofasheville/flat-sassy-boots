!function(e){try{e=angular.module("policy")}catch(t){e=angular.module("policy",[])}e.run(["$templateCache",function(e){e.put("policy-archive.html",'<div class="col-xs-12 well" style="background : white"><div class="col-xs-12" role="main"><div class="col-xs-3 hidden-print"><h1><i class="fa fa-file-text-o"></i> POLICIES</h1><form><input class="form-control" type="text" placeholder="Search policies..." ng-model="searchText.title"></form><div class="col-xs-12 list-group" style="margin-top : 20px"><a ng-click="selectPolicy(policy, $index)" ng-class="{active : $index === activeIndex}" class="list-group-item" ng-repeat="policy in policies | filter:searchText" style="cursor : pointer">{{policy.title}}</a></div></div><div class="col-xs-9 col-md-8 col-md-offset-1 col-lg-7 col-md-offset-1 print-col-12"><div class="col-xs-12 well" style="background: #F8F8F8; box-shadow: 0 6px 12px rgba(0, 0, 0, 0.175)"><h1 ng-if="selectedPolicy.title">{{selectedPolicy.title}}</h1><div class="col-xs-12"><button class="btn btn-default hidden-xs pull-right" onclick="window.print()" style="margin-bottom: 10px"><i class="fa fa-lg fa-print"></i></button><p>Published on {{selectedPolicy.date|date}}</p></div><div class="col-xs-12 well" style="background : white; border : 2px solid #ecf0f1"><table class="table table-striped"><tbody><tr ng-if="selectedPolicy.meta.subject !== \'\'"><td><strong>Subject</strong></td><td>{{selectedPolicy.meta.subject}}</td></tr><tr ng-if="selectedPolicy.meta.manual !== \'\'"><td><strong>Manual</strong></td><td>{{selectedPolicy.meta.manual}}</td></tr><tr ng-if="selectedPolicy.meta.effective_date !== \'\'"><td><strong>Effective Date</strong></td><td>{{selectedPolicy.meta.effective_date|date}}</td></tr><tr ng-if="selectedPolicy.meta.filing_instructions !== \'\'"><td><strong>Filling Instruction</strong></td><td>{{selectedPolicy.meta.filing_instructions}}</td></tr><tr ng-if="selectedPolicy.meta.policy_number !== \'\'"><td><strong>Policy Number</strong></td><td>{{selectedPolicy.meta.policy_number}}</td></tr><tr ng-if="selectedPolicy.meta.policy_revision !== \'\'"><td><strong>Policy Revision</strong></td><td>{{selectedPolicy.meta.policy_revision}}</td></tr><tr ng-if="selectedPolicy.meta.addendum_number !== \'\'"><td><strong>Addendum Number</strong></td><td>{{selectedPolicy.meta.addendum_number}}</td></tr><tr ng-if="selectedPolicy.meta.addendum_revision !== \'\'"><td><strong>Addendum Revision</strong></td><td>{{selectedPolicy.meta.addendum_revision}}</td></tr><tr ng-if="selectedPolicy.meta.city_manager_approval !== \'\'"><td><strong>City Manager Approval</strong></td><td>{{selectedPolicy.meta.city_manager_approval[0]}}</td></tr><tr ng-if="selectedPolicy.meta.issued_by !== \'\'"><td><strong>Issued By</strong></td><td>{{selectedPolicy.meta.issued_by}}</td></tr></tbody></table></div><p ng-if="selectedPolicy.content" ng-bind-html="selectedPolicy.content"></p></div></div></div></div>')}])}(),angular.module("policy",["ngSanitize","ui.router"]).run(["$rootScope",function(e){e.wpUrl=wpUrl.root}]).config(["$stateProvider","$urlRouterProvider","$httpProvider",function(e){e.state("main",{url:"",template:"<div ui-view></div>"}).state("main.archive",{url:"/:policy",templateUrl:"policy-archive.html",controller:"PolicyArchiveCtrl"})}]).controller("PolicyArchiveCtrl",["$scope","$stateParams","Policies",function(e,t,l){console.log(t),e.policies=[],e.selectedPolicy={},e.activeIndex=0,e.selectPolicy=function(t,l){e.selectedPolicy=t,e.activeIndex=l},l.get().then(function(t){console.log(t),e.policies=t,e.selectedPolicy=t[0],e.activeIndex=0})}]).factory("Policies",["$rootScope","$http","$q",function(e,t,l){var i={};return i.get=function(){var i=l.defer(),o=e.wpUrl+"/wp-json/posts",c={type:"coa-policies"};return t({method:"GET",url:o,params:c,cache:!0}).success(function(e){e.error?console.log(e.error.code):i.resolve(e)}).error(function(e){console.log("Error querying feature service."),console.log(e)}),i.promise},i}]);